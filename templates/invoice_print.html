<!DOCTYPE html>
<html>
<head>
    <title>Invoice {{ invoice.bill_no }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
            margin: 0;
            padding: 10px;
        }
        .invoice-box {
            width: 100%;
        }
        .header {
            text-align: center;
            margin-bottom: 5px;
        }
        .header h2 {
            margin: 0;
            font-size: 14px;
        }
        .header p {
            margin: 2px 0;
            font-size: 11px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 10px;
            table-layout: fixed; /* Force equal width */
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 3px;
            text-align: center;
            word-wrap: break-word; /* Wrap long text */
        }
        .totals {
            margin-top: 8px;
            text-align: center;
            font-size: 11px;
        }
        .totals p {
            margin: 2px 0;
        }
        .totals h3 {
            margin-top: 5px;
            font-size: 13px;
        }

        /* Print settings */
        @page {
            size: A4 landscape;
            margin: 5mm;
          }
          html, body {
            width: 297mm;
            height: auto; /* let content flow */
          }
    </style>
</head>
<body onload="window.print()">
    <div class="invoice-box">
        <!-- Header -->
        <div class="header">
            <h2>HEALTHON PHARMACEUTICALS</h2>
            <p>GSTIN: 32APUAS1872J1ZI</p>
            <p>Invoice No: {{ invoice.bill_no }} | Date: {{ invoice.invoice_date|date:"d-m-Y" }}</p>
        </div>
<!-- Party Info -->
<div style="margin: 5px 0; font-size: 11px; text-align:left;">
    {% if invoice.customer %}
        <p><b>Customer:</b> {{ invoice.customer.name }}</p>
        <p><b>Address:</b> {{ invoice.customer.address }}</p>
        <p><b>District:</b> {{ invoice.customer.district }}</p>
        <p><b>State:</b> {{ invoice.customer.state }}</p>
        {% if invoice.customer.gstin %}
            <p><b>GSTIN:</b> {{ invoice.customer.gstin }}</p>
        {% endif %}
        {% if invoice.customer.contact %}
            <p><b>Phone:</b> {{ invoice.customer.contact }}</p>
        {% endif %}
    {% elif invoice.supplier %}
        <p><b>Supplier:</b> {{ invoice.supplier.name }}</p>
        <p><b>Address:</b> {{ invoice.supplier.address }}</p>
        {% if invoice.supplier.contact_info %}
            <p><b>Contact Info:</b> {{ invoice.supplier.contact_info }}</p>
        {% endif %}
    {% endif %}
</div>

        <!-- Items Table -->
        <table>
            <thead>
                <tr>
                    <th>No</th>
                    <th>Item</th>
                    <th>HSN</th>
                    <th>Batch</th>
                    <th>Exp</th>
                    <th>Qty</th>
                    <th>MRP</th>
                    <th>Rate</th>
                    <th>Disc%</th>
                    <th>Tax%</th>
                    <th>Tax</th>
                    <th>Amt</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ item.item_name }}</td>
                    <td>{{ item.hsn_code }}</td>
                    <td>{{ item.batch }}</td>
                    <td>{{ item.exp_date }}</td>
                    <td>{{ item.qty }}</td>
                    <td>{{ item.mrp }}</td>
                    <td>{{ item.price }}</td>
                    <td>{{ item.discount_percentage }}</td>
                    <td>{{ item.tax_percentage }}</td>
                    <td>{{ item.tax_amount }}</td>
                    <td>{{ item.total_amount }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Totals -->
        <div class="totals">
            <p><b>Subtotal (Without GST):</b> ₹ {{ invoice.get_total_without_gst|floatformat:2 }}</p>
            <p><b>GST Total:</b> ₹ {{ invoice.get_gst_total|floatformat:2 }}</p>
            <p><b>Total (With GST):</b> ₹ {{ invoice.get_total_with_gst|floatformat:2 }}</p>
            <p><b>Round Off:</b> ₹ {{ invoice.round_off|floatformat:2 }}</p>
            <h3>Grand Total: ₹ {{ invoice.get_grand_total|floatformat:2 }}</h3>
        </div>
        
        
    </div>
</body>
</html>
